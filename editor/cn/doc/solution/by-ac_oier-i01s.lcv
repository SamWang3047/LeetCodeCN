## æ•°æ®ç»“æ„

æ˜¾ç„¶ï¼Œå¯¹äºä»»æ„ä¸€ä¸ª $t = nums2[i]$ è€Œè¨€ï¼Œæˆ‘ä»¬åº”å½“åœ¨å€™é€‰é›†åˆä¸­é€‰æ‹©**æ¯”å…¶å¤§çš„æœ€å°æ•°**ï¼Œè‹¥ä¸å­˜åœ¨è¿™æ ·çš„æ•°å­—ï¼Œåˆ™é€‰æ‹©å€™é€‰é›†åˆä¸­çš„**æœ€å°å€¼**ã€‚

åŒæ—¶ï¼Œç”±äº $nums1$ ç›¸åŒæ•°ä¼šå­˜åœ¨å¤šä¸ªï¼Œæˆ‘ä»¬è¿˜è¦å¯¹æŸä¸ªå…·ä½“æ•°å­—çš„å¯ç”¨æ¬¡æ•°è¿›è¡Œè®°å½•ã€‚

ä¹Ÿå°±æ˜¯æˆ‘ä»¬æ€»å…±æ¶‰åŠä¸¤ç±»æ“ä½œï¼š

1. å®æ—¶ç»´æŠ¤ä¸€ä¸ªå€™é€‰é›†åˆï¼Œè¯¥é›†åˆæ”¯æŒé«˜æ•ˆæŸ¥è¯¢æ¯”æŸä¸ªæ•°å¤§çš„æ•°å€¼æ“ä½œï¼›
2. å¯¹å€™é€‰é›†åˆä¸­æ¯ä¸ªæ•°å€¼çš„å¯ä½¿ç”¨æ¬¡æ•°è¿›è¡Œè®°å½•ï¼Œå½“ä½¿ç”¨åˆ°äº†å€™é€‰é›†åˆä¸­çš„æŸä¸ªæ•°åï¼Œè¦å¯¹å…¶è¿›è¡Œè®¡æ•°å‡ä¸€æ“ä½œï¼Œè‹¥è®¡æ•°ä¸º $0$ï¼Œåˆ™å°†è¯¥æ•°å€¼ä»å€™é€‰é›†åˆä¸­ç§»é™¤ã€‚

è®¡æ•°æ“ä½œå®¹æ˜“æƒ³åˆ°å“ˆå¸Œè¡¨ï¼Œè€Œå®æ—¶ç»´æŠ¤å€™é€‰é›†åˆå¹¶é«˜æ•ˆæŸ¥è¯¢å¯ä»¥ä½¿ç”¨åŸºäºçº¢é»‘æ ‘çš„ `TreeSet` æ•°æ®ç»“æ„ã€‚

ä»£ç ï¼š

* []

```Java
class Solution {
    public int[] advantageCount(int[] nums1, int[] nums2) {
        int n = nums1.length;
        TreeSet<Integer> tset = new TreeSet<>();
        Map<Integer, Integer> map = new HashMap<>();
        for (int x : nums1) {
            map.put(x, map.getOrDefault(x, 0) + 1);
            if (map.get(x) == 1) tset.add(x);
        }
        int[] ans = new int[n];
        for (int i = 0; i < n; i++) {
            Integer cur = tset.ceiling(nums2[i] + 1);
            if (cur == null) cur = tset.ceiling(-1);
            ans[i] = cur;
            map.put(cur, map.get(cur) - 1);
            if (map.get(cur) == 0) tset.remove(cur);
        }
        return ans;
    }
}
```

* []

```Python
from sortedcontainers import SortedList

class Solution:
    def advantageCount(self, nums1: List[int], nums2: List[int]) -> List[int]:
        n = len(nums1)
        cnts, tset = defaultdict(int), SortedList()
        for i in range(n):
            cnts[nums1[i]] += 1
            if cnts[nums1[i]] == 1:
                tset.add(nums1[i])
        ans = [0] * n
        for i in range(n):
            t = nums2[i]
            if (idx := tset.bisect_left(t + 1)) == len(tset):
                idx = tset.bisect_left(-1)
            ans[i] = tset[idx]
            cnts[ans[i]] -= 1
            if cnts[ans[i]] == 0:
                tset.remove(ans[i])
        return ans
```

* æ—¶é—´å¤æ‚åº¦ï¼š$O(n\log{n})$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$

---

## åŠ é¤

**èŠ‚åç¬¬ä¸€å¤©ï¼ŒåŠ é¤ä¸€é“åŒç±»å‹é¢˜ç›® : [éš¾åº¦ 2.5/5ï¼Œæ•²é†’æ²‰ç¡å¿ƒçµçš„æ•°æ®ç»“æ„è¿ç”¨é¢˜](https://mp.weixin.qq.com/s?__biz=MzU4NDE3MTEyMA==&mid=2247493710&idx=1&sn=2d6d4ee9f4b1ff1ea766ddf7ea57bf55) ğŸ‰ğŸ‰**

---

## æœ€å

**å¦‚æœæœ‰å¸®åŠ©åˆ°ä½ ï¼Œè¯·ç»™é¢˜è§£ç‚¹ä¸ªèµå’Œæ”¶è—ï¼Œè®©æ›´å¤šçš„äººçœ‹åˆ° ~ ("â–”â–¡â–”)/**

æ‰€æœ‰é¢˜è§£å·²ç»åŠ å…¥ [åˆ·é¢˜æŒ‡å—](https://github.com/SharingSource/LogicStack-LeetCode/wiki)ï¼Œæ¬¢è¿ star å“¦ ~
